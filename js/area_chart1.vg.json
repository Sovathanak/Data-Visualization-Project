{
    "$schema": "https://vega.github.io/schema/vega-lite/v3.json",
    "width": "container", "height": 300,
    "data": {"url": "https://raw.githubusercontent.com/Sovathanak/Data-Visualization-Project/master/data/broad_age.csv"},
    "transform": [
    {
    "lookup": "Entity",
    "from":{
    "data":{"url": "https://raw.githubusercontent.com/Sovathanak/Data-Visualization-Project/master/data/population-by-broad-age-group.csv"},
    "key":"properties.NAME",
    "fields": ["Year","5_or_under","5_to_14","15_to_24","25_to_64","65_or_over"]    
}
    },
    {
  "calculate": "datum.5_or_under + datum.5_to_14 + datum.15_to_24 + datum.25_to_64 + datum.65_or_over","as": "Population"
        }
    ],
    "mark": {
        "type":"area",
        "tooltip":true,
        "interpolate": "monotone"
      },
  
    "encoding": {
      "x": {
        "field": "Year", "type": "temporal",
        "axis":{
          "grid":false
      }
      },
      "y": {
        "field": "Population", 
        "type": "quantitative"
        
      },
      "color": {
        "field": "Age range",
        "type": "nominal",
        "legend":{"orient": "bottom"},
        "scale": {"range": ["#FF5E3C", "#71ADE7", "#4F5BFB", "#CA9EFF", "#6BCCC8"]}
      },
        "tooltip": [
           {"field": "5 or under", "type": "quantitative", "format":","},
           {"field": "5 to 14", "type": "quantitative", "format":","},
           {"field": "15 to 24", "type": "quantitative", "format":","},
           {"field": "25 to 64", "type": "quantitative", "format":","},
           {"field": "65 or over", "type": "quantitative", "format":","},
           {"field": "Total", "type": "quantitative", "format":",", "title": "Total Population"},
           {"field": "Year", "timeUnit": "year","type": "temporal", "title": "Year"}
         ]
    }
  }